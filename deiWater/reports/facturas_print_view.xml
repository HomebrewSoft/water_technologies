<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<template id="facturas_print_view_document">
<t t-call="report.html_container">
<t t-foreach="docs" t-as="o">
<div class="header">
<div class="row">  
    <table style="width:100%;">
        <tr>
        <td style="width:30%;" class="text-left" >
        
        <p style="text-align: center; font-size:12px;"  >

        <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % o.company_id.logo" style="width:200px;height:90px;"/>

           <br/>   
            <span t-field="o.company_id.street"/>,
            <span t-field="o.company_id.street2"/>.
            <span t-field="o.company_id.city"/> ,
            <span t-field="o.company_id.country_id.name"/>
            <br/>
            Telefono: <span t-field="o.company_id.phone"/>, Email:<span t-field="o.company_id.email"/>
            <br/>
            RTN: <span t-field="o.company_id.company_registry"/> 
          
          </p>

        </td>
        
        <td style="width:40%;">
        <h4 class="text-right" style="font-weight:bold;">
            <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">FACTURA</span>
            <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
            <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Factura borrador</span>
            <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Factura Cancelada</span>
            <span t-if="o.type == 'out_refund'">NOTA DE CREDITO</span>
            <span t-if="o.type == 'in_refund'">Devolución</span>
            <span t-if="o.type == 'in_invoice'">Factura</span>
            : <span t-field="o.number"/>
        </h4>
        <p style="color: #27AE60; font-size:10px;" class="text-right">
          CAI: <span t-field="o.cai_shot"/>
          <br/>
          Fecha de Vencimiento: <span t-field="o.cai_expires_shot"/>
          <br/>
          Rango Autorizado:  
          <span t-field="o.min_number_shot"> </span> a <span t-field="o.max_number_shot"> </span>   
           <br/>
        </p>
        </td>
        </tr>
    </table>
</div>  
</div>

<!--FOOTER- PIE DE PAGINA-->
<!--
<div class="footer" >
  <p class="text-center">
    <strong>Original:Cliente - Copia:Emisor</strong>
      <p style="font-size:10px;" class="text-right">
    <strong>Autoimpresor</strong>
    </p>
  </p>
</div>
-->

<div class="page">   
<table style="font-size:12px; width:100%;">
<tr>
    <td style="width:25%;">
        <strong>Fecha:</strong> 
           <!-- <strong>RTN: </strong><span t-field="o.partner_id..rtn"/>-->
    </td>
    <td style="width:25%;" class="text-left">
        <strong>Comercial/Vendedor:</strong>
    </td>
    <td style="width:25%;" class="text-center">
       <strong>Condiciones de Pago:</strong> 
    </td>
    <td style="width:25%;">
     </td> 
</tr>
<tr>
    <td style="width:25%;">
        <span t-field="o.date_invoice"/>
    </td>
    <td style="width:25%;" class="text-left">
            <span t-field="o.user_id.name"/>
    </td>
    <td style="width:25%;" class="text-center">
        <span t-field="o.payment_term.name"/>
    </td>
      <td style="width:5%;">
     </td> 
</tr>
<br/>
    <tr>
        <td style="width:35%;">
             <br/>
        </td>
        <td style="width:25%;" class="text-left">
              <br/>
        </td>
        <td style="width:25%;" class="text-center">
             <br/>
        </td>
        <td style="width:5%;">
        </td> 
    </tr>
    <tr>
        <td style="width:35%;">
            <strong>Cliente:</strong> 
               <!-- <strong>RTN: </strong><span t-field="o.partner_id..rtn"/>-->
        </td>
        <td style="width:25%;" class="text-left">
            <strong>Tel:</strong>
        </td>
        <td style="width:25%;" class="text-center">
           <strong class="text-center">RTN:</strong> 
        </td>
         <td style="width:5%;">
        </td> 
    </tr>
    <tr>
        <td style="width:35%;">
             <span t-field="o.partner_id.name"/>
        </td>
        <td style="width:25%;" class="text-left">
           <span t-field="o.partner_id.phone"/>
        </td>
        <td style="width:25%;" class="text-center">
           <span t-field="o.partner_id.rtn"/> 
        </td>
         <td style="width:5%;">
        </td> 
    </tr>
    <tr>
        <td style="width:35%;">
              <br/>
            <strong>Dirección:</strong> 
               <!-- <strong>RTN: </strong><span t-field="o.partner_id..rtn"/>-->
        </td>
        <td style="width:25%;" class="text-left">
             <br/>
        </td>
        <td style="width:25%;" class="text-center">
             <br/>
        </td>
         <td style="width:5%;">
        </td> 
    </tr>
    <tr>
        <td style="width:35%;">
              <span t-field="o.partner_id.street"/> 
        </td>
        <td style="width:25%;" class="text-left">
          
        </td>
        <td style="width:25%;" class="text-center">
       
        </td>
        <td style="width:5%;">
        </td> 
    </tr>
</table> 
<br/>
<t t-set="contador" t-value="1"/>
<t t-set="gravado" t-value="0"/>
<t t-set="exenta" t-value="0"/>
<table class="table table-condensed" style="font-size:12px;border:1px solid black;">
    <thead style="background: rgb(103,180,63);">
        <tr style="font-size:12px;">
            <th class="text-center" style="width:10%;border:1px solid black;">Cantidad.</th>
            <th class="text-center" style="width:15%;border:1px solid black;">Código</th> 
            <th style="width:30%;border:1px solid black;">Descripción Producto</th>
            <th class="text-center" style="width:15%;border:1px solid black;">Valor Unitario</th>
             <th class="text-center" style="width:15%;border:1px solid black;">Descuento y Rebajas</th>
            <th class="text-center" style="width:15%;border:1px solid black;">Total</th>
        </tr>
    </thead>

    <tbody class="invoice_tbody" style="font-size:12px;">
        <tr t-foreach="o.invoice_line" t-as="l">
            <t t-if="l.invoice_line_tax_id">
                <t t-set="gravado" t-value="gravado + l.price_subtotal"/>
            </t>
            <t t-if="not(l.invoice_line_tax_id)">
                <t t-set="exenta" t-value="exenta + l.price_subtotal"/>
            </t>
            <td class="text-center" style="width:10%;;border:1px solid black;">
                  <span t-field="l.quantity"/>
            </td>
             <td class="text-center" style="width:15%;;border:1px solid black;">
                <span t-field="l.product_id.default_code"/>
            </td>
            <td class="text-center" style="width:30%;;border:1px solid black;">
                
                <t t-if="l.product_id.name is False ">
                      <span t-field="l.name"/>
                </t>

                <t t-if="l.product_id.name is not False ">
                      <span t-field="l.product_id.name"/>
                </t>
            </td>
            <td class="text-center" style="width:15%;;border:1px solid black;">
                 <span t-field="l.price_unit"/>
            </td>
            <td class="text-center" style="width:15%;;border:1px solid black;">
                 <span t-field="l.discount"/>
            </td>
            <td class="text-center" style="width:15%;;border:1px solid black;">
                <span t-field="l.price_subtotal"/>
            </td>
        </tr>
    </tbody>
</table>
<div class="row" style="font-size:12px;">
    <div class="col-xs-8">
         <p style="font-size:10px;" class="text-left">
                     <!--
                     <strong>
                         Recibí la mercadería completa en buenas condiciones por el carácter de factura cambiaria, según el código de comisión, acepto las condiciones convenidas en esta. En caso la parte deudora no pague el valor de la mercadería en fecha acordada, se cobrará un 5% de recargo por mora, lo cual se tendrá expresamente aceptado en la firma del presente contrato. 
                      </strong>
                    -->
          </p>
              
              <br/>
              <br/>
              <br/>

           <p class="text-center">
              <p class="text-center">
                    ___________________________________________ 
                    <br/>
                            Firma
                    <br/>
                    Esta Factura no es comprobante de Pago, Exija su correspondiente Recibo de Caja
                    <br/>
                    <strong> La Factura es beneficio de Todos ¡Exijala! </strong>
              </p>
           </p>  

            <br/>
       
          <strong>Total en letras : </strong>  <br/> 
             <span t-field="o.amount_total_text"> </span>
                   <br/>   <br/>
      
    </div>
<div class="col-xs-4 pull-right">
<table class="table table-condensed">
    <tr style="font-size:12px;" class="border-black">
        <td>Descuento Otorgados</td>
        <td class="text-right">
           <span t-field="o.total_descuento" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
        </td>
    </tr>
    <tr style="font-size:12px;" class="border-black">
        <td>Rebajas Otorgadas</td>
        <td class="text-right">
           <span t-field="o.currency_id.symbol"/> 0.00
        </td>
    </tr>
    <tr class="border-black">
        <td style="font-size:12px;">Sub-Total</td>
        <td class="text-right" style="font-size:12px;">
          <span t-field="o.amount_untaxed" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
        </td>
    </tr>
    <tr class="border-black">
        <td style="font-size:12px;">Importe Exento</td>
        <td class="text-right" style="font-size:12px;">
             <span t-field="o.currency_id.symbol"/> <t t-esc="'{0:,.2f}'.format(exenta)"/> 
        </td>
    </tr>

    <tr style="font-size:12px;" class="border-black">
        <td>Importe Gravado</td>
        <td class="text-right">
         <span t-field="o.currency_id.symbol"/> <t t-esc="'{0:,.2f}'.format(gravado)"/> 
        </td>
    </tr>
     <tr style="font-size:12px;" class="border-black">
        <td>ISV 15%</td>
        <td class="text-right">
            <span t-field="o.amount_tax" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
        </td>
    </tr>
      <tr style="font-size:12px;" class="border-black">
        <td>ISV 18%</td>
        <td class="text-right">
             <span t-field="o.currency_id.symbol"/> 0.0
        </td>
    </tr>
    <tr class="border-black">
        <td style="font-size:12px;">Importe Exonerado</td>
        <td class="text-right" style="font-size:12px;">
           <span t-field="o.currency_id.symbol"/> 0.00
        </td>
    </tr>
    <tr class="border-black">
        <td style="font-size:12px;">TOTAL</td>
        <td class="text-right" style="font-size:12px;">
             <span t-field="o.amount_total" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
        </td>
    </tr>
</table>
</div>  
</div>
    <table style="height:110px;">
        <tr><td/><td><p/></td><td/></tr>
        <tr>
        <td class="text-left" style="width:85%;">
           
           
            <strong>Datos del adquiriente exonerado</strong><br/>
              
              <p style="width:450px;"> 
                 N° Correlativo de orden de compra exenta:
                  <span t-field="o.numero_orden_exenta"/>
                  <br/> 
                 N° Correlativo de constancia de registro exonerado:
                  <span t-field="o.numero_correlativo_constancia_exonerado"/>
                   <br/>
                   N° Identificativo del registro de la SAG:
                  <span t-field="o.numero_identificacion_sag"/> 
                  

              </p>

          
            
            
            
            
        </td>
        <td style="width:15%;"/></tr>
        </table> 
    <!--
    <strong >OBSERVACIONES:  <span t-field="o.comment"> </span></strong>
    -->
</div>


      <!-- Esta etiqueta del footer es la que no funciona -->
  </t>
</t>

</template>

<template id="report_factura_view">
        <t t-call="report.html_container">
            <t t-foreach="docs" t-as="doc">
            <t t-raw="translate_doc(doc_id, doc_model,'partner_id.lang','deiWater.facturas_print_view_document')"/>
            </t>
        </t>
</template>
</data>
</openerp>
